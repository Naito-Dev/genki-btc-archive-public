<!doctype html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Genki BTCシグナル | ウェイトリスト</title>
  <!--
    Switch-to-paid checklist (after 60-day live verification):
    1) Replace waitlist CTA href (#waitlist) with checkout URL in BOTH CTA buttons.
    2) Update access state text from "Waitlist Open" to "Now Open".
    3) Keep price at US$329/mo (no discounts) and update よくある質問 "When paid access begins" answer.
    4) Keep proof + live verification sections unchanged for trust continuity.
  -->
  <style>
    :root {
      --bg: #05090f;
      --bg-2: #0a1630;
      --panel: rgba(10, 24, 49, 0.92);
      --panel-2: rgba(8, 18, 36, 0.9);
      --line: rgba(122, 159, 225, 0.24);
      --text: #f2f6ff;
      --muted: #aebddb;
      --soft: #7f91b4;
      --gold: #d8b24a;
      --gold-hi: #e4c76a;
      --gold-edge: #b98d2f;
      --green: #49c884;
      --red: #e07d7d;
      --radius: 18px;
    }
    * { box-sizing: border-box; }
    html { scroll-behavior: smooth; }
    body {
      margin: 0;
      color: var(--text);
      background:
        radial-gradient(1200px 700px at 90% -10%, rgba(216,178,74,0.12), transparent 62%),
        radial-gradient(1000px 600px at -10% 10%, rgba(73,200,132,0.10), transparent 58%),
        linear-gradient(180deg, var(--bg), var(--bg-2));
      font-family: Inter, "Segoe UI", system-ui, -apple-system, sans-serif;
      line-height: 1.5;
    }
    .wrap { width: min(1080px, 92vw); margin: 0 auto; }
    .lang-switch {
      position: sticky;
      top: 10px;
      z-index: 20;
      display: flex;
      justify-content: flex-end;
      width: min(1080px, 92vw);
      margin: 10px auto 0;
      gap: 6px;
    }
    .lang-btn {
      min-height: 28px;
      padding: 0 10px;
      border-radius: 999px;
      border: 1px solid var(--line);
      background: rgba(8,18,36,.62);
      color: var(--muted);
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      font-weight: 700;
      letter-spacing: .06em;
      text-transform: uppercase;
    }
    .lang-btn.active {
      color: #0b1020;
      background: linear-gradient(180deg, var(--gold-hi), var(--gold));
      border-color: var(--gold-edge);
    }
    .hero { padding: 56px 0 34px; }
    .eyebrow {
      display: inline-flex;
      align-items: center;
      border: 1px solid var(--line);
      border-radius: 999px;
      padding: 6px 12px;
      font-size: 12px;
      letter-spacing: .08em;
      text-transform: uppercase;
      color: var(--muted);
      margin-bottom: 14px;
    }
    h1 {
      margin: 0;
      font-size: clamp(34px, 6vw, 58px);
      line-height: 1.06;
      letter-spacing: -0.02em;
      max-width: 900px;
    }
    .lead {
      margin: 14px 0 0;
      color: var(--muted);
      font-size: clamp(16px, 2.2vw, 22px);
      max-width: 840px;
    }
    .phase-note {
      margin-top: 10px;
      color: var(--soft);
      font-size: 13px;
      letter-spacing: .02em;
    }
    .hero-grid {
      margin-top: 22px;
      display: grid;
      gap: 14px;
      grid-template-columns: 1fr 1fr;
    }
    .card {
      background: var(--panel);
      border: 1px solid var(--line);
      border-radius: var(--radius);
      padding: 18px;
      box-shadow: 0 10px 28px rgba(0, 0, 0, 0.20), inset 0 1px 0 rgba(255, 255, 255, 0.03);
    }
    .mini-title {
      margin: 0 0 8px;
      font-size: 12px;
      letter-spacing: .08em;
      text-transform: uppercase;
      color: var(--muted);
      font-weight: 700;
    }
    .signal-preview {
      display: grid;
      gap: 8px;
      margin-top: 8px;
      font-size: 14px;
    }
    .signal-preview div {
      border: 1px solid rgba(122,159,225,.2);
      border-radius: 12px;
      padding: 10px 12px;
      background: rgba(7, 17, 34, 0.65);
    }
    .cta-row {
      margin-top: 16px;
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }
    .btn {
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      min-height: 46px;
      border-radius: 999px;
      padding: 0 18px;
      font-size: 14px;
      font-weight: 800;
      white-space: nowrap;
    }
    .btn[aria-disabled="true"] {
      pointer-events: none;
      opacity: .48;
      cursor: not-allowed;
      filter: saturate(.7);
    }
    .btn.primary {
      color: #0b1020;
      background: linear-gradient(180deg, var(--gold-hi), var(--gold));
      border: 1px solid var(--gold-edge);
      box-shadow: 0 8px 20px rgba(216, 178, 74, 0.24);
    }
    .btn.secondary {
      color: var(--text);
      border: 1px solid var(--line);
      background: rgba(8, 18, 36, 0.5);
    }
    section { padding: 14px 0; }
    h2 {
      margin: 0 0 10px;
      font-size: clamp(24px, 4vw, 34px);
      line-height: 1.15;
      letter-spacing: -0.02em;
    }
    p { margin: 0; }
    .sub {
      color: var(--muted);
      margin-bottom: 14px;
      font-size: 15px;
    }
    .unlock-grid {
      display: grid;
      gap: 10px;
      grid-template-columns: repeat(2, minmax(0, 1fr));
    }
    .unlock-item {
      border: 1px solid rgba(122,159,225,.2);
      border-radius: 12px;
      background: rgba(8, 18, 36, 0.58);
      padding: 12px;
      font-size: 14px;
      color: var(--muted);
    }
    .unlock-item strong {
      display: block;
      color: var(--text);
      margin-bottom: 4px;
      font-size: 14px;
    }
    .table-wrap { overflow-x: auto; }
    table { width: 100%; border-collapse: collapse; min-width: 640px; }
    th, td {
      border-bottom: 1px solid rgba(122,159,225,.18);
      padding: 10px 8px;
      text-align: left;
      font-size: 14px;
    }
    th { color: var(--muted); font-weight: 700; }
    .compare-cards {
      display: none;
      gap: 10px;
      margin-top: 2px;
    }
    .compare-card {
      border: 1px solid rgba(122,159,225,.2);
      border-radius: 12px;
      background: rgba(8, 18, 36, 0.58);
      padding: 12px;
    }
    .compare-card .item {
      margin: 0 0 8px;
      font-size: 13px;
      font-weight: 800;
      color: var(--text);
      letter-spacing: .01em;
    }
    .compare-card .row {
      font-size: 13px;
      color: var(--muted);
      margin-top: 4px;
    }
    .compare-card .row strong {
      color: var(--text);
      font-weight: 700;
      margin-right: 6px;
    }
    .good { color: var(--green); }
    .warn { color: var(--red); }
    .steps {
      display: grid;
      gap: 10px;
      grid-template-columns: repeat(3, minmax(0, 1fr));
    }
    .step {
      border: 1px solid rgba(122,159,225,.2);
      border-radius: 12px;
      background: rgba(8, 18, 36, 0.58);
      padding: 12px;
    }
    .step .n {
      width: 24px;
      height: 24px;
      border-radius: 999px;
      border: 1px solid var(--line);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-weight: 800;
      font-size: 12px;
      color: var(--muted);
      margin-bottom: 8px;
    }
    .step h3 { margin: 0 0 6px; font-size: 16px; }
    .step p { color: var(--muted); font-size: 14px; }
    .proof-kpis {
      display: grid;
      gap: 10px;
      grid-template-columns: repeat(4, minmax(0, 1fr));
      margin-top: 10px;
    }
    .proof-status {
      margin-top: 10px;
      border: 1px solid rgba(122,159,225,.2);
      border-radius: 12px;
      background: rgba(8, 18, 36, 0.58);
      padding: 12px;
    }
    .proof-status .title {
      margin: 0 0 8px;
      font-size: 12px;
      letter-spacing: .08em;
      text-transform: uppercase;
      color: var(--muted);
      font-weight: 700;
    }
    .proof-status-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 8px 12px;
      font-size: 13px;
      color: var(--muted);
    }
    .proof-status-grid strong {
      color: var(--text);
      font-weight: 700;
    }
    .proof-kpis .kpi {
      border: 1px solid rgba(122,159,225,.2);
      border-radius: 12px;
      background: rgba(8, 18, 36, 0.58);
      padding: 12px;
    }
    .proof-kpis .v { font-size: 21px; font-weight: 900; line-height: 1; }
    .proof-kpis .k { margin-top: 5px; color: var(--muted); font-size: 12px; }
    .price-box {
      display: grid;
      gap: 10px;
      grid-template-columns: 1fr 1fr;
      align-items: start;
    }
    .price {
      font-size: clamp(34px, 7vw, 48px);
      font-weight: 900;
      line-height: 1;
      letter-spacing: -0.03em;
    }
    .list {
      margin: 0;
      padding-left: 18px;
      color: var(--muted);
      font-size: 14px;
      display: grid;
      gap: 5px;
    }
    .faq {
      display: grid;
      gap: 10px;
    }
    details {
      border: 1px solid rgba(122,159,225,.2);
      border-radius: 12px;
      background: rgba(8, 18, 36, 0.58);
      padding: 10px 12px;
    }
    summary {
      cursor: pointer;
      font-size: 14px;
      font-weight: 700;
      color: var(--text);
      list-style: none;
    }
    details p {
      margin-top: 8px;
      font-size: 14px;
      color: var(--muted);
    }
    .waitlist-card {
      background: linear-gradient(130deg, rgba(216,178,74,.15), rgba(8,18,36,.86));
      border: 1px solid rgba(216,178,74,.3);
      border-radius: var(--radius);
      padding: 18px;
    }
    .waitlist-form {
      margin-top: 12px;
      display: grid;
      gap: 10px;
      grid-template-columns: 1fr 1fr;
    }
    .waitlist-form label {
      display: grid;
      gap: 5px;
      font-size: 12px;
      color: var(--muted);
    }
    .waitlist-form input {
      width: 100%;
      min-height: 42px;
      border-radius: 10px;
      border: 1px solid var(--line);
      background: rgba(8,18,36,.66);
      color: var(--text);
      padding: 0 12px;
      font-size: 14px;
    }
    .waitlist-form .full { grid-column: 1 / -1; }
    .fine {
      margin-top: 10px;
      color: var(--soft);
      font-size: 12px;
    }
    footer {
      padding: 10px 0 44px;
      color: var(--soft);
      font-size: 12px;
      text-align: center;
    }
    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0,0,0,0);
      white-space: nowrap;
      border: 0;
    }
    @media (max-width: 900px) {
      .hero-grid, .price-box { grid-template-columns: 1fr; }
      .proof-kpis { grid-template-columns: repeat(2, minmax(0, 1fr)); }
      .steps { grid-template-columns: 1fr; }
      .unlock-grid { grid-template-columns: 1fr; }
      .waitlist-form { grid-template-columns: 1fr; }
    }
    @media (max-width: 760px) {
      .table-wrap { display: none; }
      .compare-cards { display: grid; }
    }
  </style>
</head>
<body>
  <nav class="lang-switch" aria-label="Language switch">
    <a class="lang-btn" href="/genki-btc-archive-public/sales-page-en.html">EN</a>
    <a class="lang-btn active" href="/genki-btc-archive-public/sales-page-ja.html">JA</a>
  </nav>
  <header class="hero">
    <div class="wrap">
      <span class="eyebrow">BTC資産防衛シグナル</span>
      <h1>BTCを持っている。でも毎日「持ちすぎか、少なすぎか」で迷ってしまう。</h1>
      <p class="lead">その迷いを、1日1回のルールベース回答に置き換えます。チャート張り付き不要。ノイズなし。明確な配分レベルだけ受け取り、日常に戻れる設計です。</p>
      <p class="phase-note">ライブ検証中 • ウェイトリスト受付中 • 検証完了後に有料提供開始</p>

      <div class="hero-grid">
        <article class="card">
          <p class="mini-title">受け取れるもの</p>
          <p class="sub" style="margin:0">1日1通の短いメール。件名でその日の判断が分かる設計です。</p>
          <div class="signal-preview" aria-label="無料版と有料版の比較 preview">
            <div><strong>無料版:</strong> 状態ラベルのみ表示</div>
            <div><strong>有料メール:</strong> 正確な配分 — <span class="good">BTC 30% / Cash 70%</span> — と実行文脈</div>
          </div>
          <div class="cta-row">
            <a class="btn primary" href="#waitlist">ウェイトリストに参加</a>
            <a class="btn secondary" href="https://naito-dev.github.io/genki-btc-archive-public/">← 公開ダッシュボードに戻る</a>
          </div>
        </article>
        <article class="card">
          <p class="mini-title">このような方に向いています</p>
          <ul class="list" style="padding-left:16px">
            <li>BTCを長期保有しているが、毎日のポジション量に迷う方。</li>
            <li>一日中チャートを見られない（見るべきでもない）忙しい方。</li>
            <li>インフルエンサー予想ではなく、ルールと証跡を重視する方。</li>
            <li>判断の負荷を下げたいが、責任は自分で持ちたい方。</li>
          </ul>
        </article>
      </div>
    </div>
  </header>

  <main>
    <section>
      <div class="wrap card">
        <h2>有料版で解放される価値</h2>
        <p class="sub">無料ダッシュボードは証跡レイヤー。有料版は実行レイヤーです。</p>
        <div class="unlock-grid">
          <div class="unlock-item"><strong>正確な配分バンド</strong>4段階（BTC 0% / 30% / 70% / 100%）を明示。解釈は不要です。</div>
          <div class="unlock-item"><strong>なぜそのシグナルか</strong>当日のレベル背景を短く提示。出力だけでなく文脈も把握できます。</div>
          <div class="unlock-item"><strong>日次配信（定時・1回）</strong>件名を読んで必要時だけ対応。平均判断時間は1分未満を想定。</div>
          <div class="unlock-item"><strong>完全な履歴アーカイブ</strong>過去のシグナル・配分・理由を一貫して確認できます。</div>
          <div class="unlock-item"><strong>データ準備状態</strong>市場データが不安定なときは明示し、誤作動を避けます。</div>
          <div class="unlock-item"><strong>ハッシュ検証済み証跡</strong>結果確定前の判断を公開記録。改ざん検知可能です。</div>
        </div>
      </div>
    </section>

    <section>
      <div class="wrap card">
        <h2>無料版と有料版の比較</h2>
        <div class="table-wrap">
          <table>
            <thead>
              <tr><th>項目</th><th>無料ダッシュボード</th><th>有料アクセス</th></tr>
            </thead>
            <tbody>
              <tr><td>ポジション配分</td><td>非表示 / 要約のみ</td><td>ルール化バンド（0% / 30% / 70% / 100%）</td></tr>
              <tr><td>ターゲット配分バンド</td><td>非表示</td><td>毎日表示（4段階固定）</td></tr>
              <tr><td>本日のシグナル</td><td>状態ラベルのみ</td><td>状態 + 配分ライン</td></tr>
              <tr><td>直近の判断履歴</td><td>状態テキスト</td><td>状態 + 配分コンテキスト</td></tr>
              <tr><td>データ同期 / 実行可否</td><td>要約</td><td>実行可否の解釈付き</td></tr>
              <tr><td>配信方法</td><td>公開ダッシュボード閲覧</td><td>日次メール（定時配信）</td></tr>
              <tr><td>履歴アーカイブ</td><td>限定的な透明性レイヤー</td><td>実務向け完全アーカイブ</td></tr>
              <tr><td>改ざん防止の証跡</td><td>Visible</td><td>表示あり（同一の証跡基盤）</td></tr>
            </tbody>
          </table>
        </div>
        <div class="compare-cards" aria-label="無料版と有料版の比較 mobile comparison">
          <article class="compare-card"><p class="item">ポジション配分</p><p class="row"><strong>Free:</strong>非表示 / 要約のみ</p><p class="row"><strong>Premium:</strong>ルール化バンド（0% / 30% / 70% / 100%）</p></article>
          <article class="compare-card"><p class="item">ターゲット配分バンド</p><p class="row"><strong>Free:</strong>非表示</p><p class="row"><strong>Premium:</strong>毎日表示（4段階固定）</p></article>
          <article class="compare-card"><p class="item">本日のシグナル</p><p class="row"><strong>Free:</strong>状態ラベルのみ</p><p class="row"><strong>Premium:</strong>状態 + 配分ライン</p></article>
          <article class="compare-card"><p class="item">直近の判断履歴</p><p class="row"><strong>Free:</strong>状態テキスト</p><p class="row"><strong>Premium:</strong>状態 + 配分コンテキスト</p></article>
          <article class="compare-card"><p class="item">データ同期 / 実行可否</p><p class="row"><strong>Free:</strong>要約</p><p class="row"><strong>Premium:</strong>実行可否の解釈付き</p></article>
          <article class="compare-card"><p class="item">配信方法</p><p class="row"><strong>Free:</strong>公開ダッシュボード閲覧</p><p class="row"><strong>Premium:</strong>日次メール（定時配信）</p></article>
          <article class="compare-card"><p class="item">履歴アーカイブ</p><p class="row"><strong>Free:</strong>限定的な透明性レイヤー</p><p class="row"><strong>Premium:</strong>実務向け完全アーカイブ</p></article>
          <article class="compare-card"><p class="item">改ざん防止の証跡</p><p class="row"><strong>Free:</strong>Visible</p><p class="row"><strong>Premium:</strong>表示あり（同一の証跡基盤）</p></article>
        </div>
      </div>
    </section>

    <section>
      <div class="wrap card">
        <h2>1日の中での使い方</h2>
        <p class="sub">チャート監視より、本業に集中したい人向けの設計です。</p>
        <div class="steps">
          <article class="step">
            <span class="n">1</span>
            <h3>1通のメールが届く</h3>
            <p>件名にシグナルが入るので、数秒で確認できます。多くの日は変更なしです。</p>
          </article>
          <article class="step">
            <span class="n">2</span>
            <h3>1つの判断をする</h3>
            <p>維持・縮小・拡大のどれか。配分バンドが明示されるので迷いを減らせます。</p>
          </article>
          <article class="step">
            <span class="n">3</span>
            <h3>日常に戻る</h3>
            <p>常時チャート監視や二重チェックは不要。監視はシステム側で継続します。</p>
          </article>
        </div>
      </div>
    </section>

    <section>
      <div class="wrap card">
        <h2>証跡と実績（参考値）</h2>
        <p class="sub">透明性のために過去検証値とライブ検証を表示しています。利益保証ではありません。</p>
        <p class="fine" style="margin-top:-6px">ライブ資金テスト: 進行中（公開証跡あり）。</p>
        <div class="proof-status" aria-label="Proof status summary">
          <p class="title">Proof Status</p>
          <div class="proof-status-grid">
            <div><strong>Live Forward Test:</strong> <span id="proofDay">UNAVAILABLE</span></div>
            <div><strong>Chain Integrity:</strong> <span id="proofIntegrity">VALID</span></div>
            <div><strong>Records Published:</strong> <span id="proofRecords">UNAVAILABLE</span></div>
            <div><strong>Last Proof Time (UTC):</strong> <span id="proofTimeUtc">YYYY-MM-DD HH:MM</span></div>
            <div><strong>Last Commit SHA:</strong> <a id="proofCommitLink" href="" target="_blank" rel="noopener noreferrer" style="color:var(--muted)" hidden><span id="proofCommitShaLink">UNAVAILABLE</span></a><span id="proofCommitShaPlain" style="color:var(--muted)">UNAVAILABLE</span></div>
            <div><strong>ライブ資金テスト:</strong> 進行中（公開証跡あり）</div>
          </div>
        </div>
        <div class="proof-kpis">
          <div class="kpi"><div class="v">15.17x</div><div class="k">最終資産倍率（参考）</div></div>
          <div class="kpi"><div class="v">41.02%</div><div class="k">CAGR（参考）</div></div>
          <div class="kpi"><div class="v">-19.79%</div><div class="k">最大ドローダウン（参考）</div></div>
          <div class="kpi"><div class="v">11.80%</div><div class="k">平均エクスポージャー（参考）</div></div>
        </div>
        <p class="fine">将来収益は保証されません。投資助言ではありません。最終判断はご自身で行ってください。</p>
        <p class="fine" style="margin-top:6px">過去の参考値です — 技術検証情報を確認できます。</p>
        <p class="fine" style="margin-top:8px"><a href="https://github.com/Naito-Dev/genki-btc-archive-public/blob/main/README.ja.md" style="color:var(--muted)">バックテスト手法（参考）を見る</a> • <a href="https://naito-dev.github.io/genki-btc-archive-public/" style="color:var(--muted)">公開検証ダッシュボードを見る</a> • <a href="https://raw.githubusercontent.com/Naito-Dev/genki-btc-archive-public/main/log.json" style="color:var(--muted)">公開証跡（log.json）を見る</a></p>
        <p class="fine" style="margin-top:6px"><a href="/genki-btc-archive-public/verification/index.html" style="color:var(--muted)">技術検証・再現性センターを見る（上級者向け）</a></p>
        <p class="fine" style="margin-top:6px">この欄は公開検証の証跡表示であり、取引所のリアルタイム残高表示ではありません。</p>
      </div>
    </section>

    <section>
      <div class="wrap card">
        <h2>よくある質問</h2>
        <div class="faq">
          <details>
            <summary>BTCリスクシグナルとは？</summary>
            <p>BTC現物保有者向けに、市場構造に基づいて守り優先か保有継続かを示すルールベースの日次レポートです。目的は資産防衛と判断の明確化であり、常時トレードではありません。</p>
          </details>
          <details>
            <summary>どんな人向けですか？</summary>
            <p>ドローダウン管理を重視し、日次で簡潔に判断したいBTC現物保有者向けです。</p>
          </details>
          <details>
            <summary>具体的に何が届きますか？</summary>
            <p>現在のシグナル状態、ルール化された配分レベル（4段階固定）、実行コンテキスト、無料版では見えない履歴情報を含む短い日次メールです。</p>
          </details>
          <details>
            <summary>更新頻度は？</summary>
            <p>毎日1回、定時で更新。同期と証跡チェックを実施します。</p>
          </details>
          <details>
            <summary>市場データが不安定なときは？</summary>
            <p>リスクオンを強制せず、安全優先の挙動に切り替え、その状態を明示します。</p>
          </details>
          <details>
            <summary>投資助言ですか？</summary>
            <p>いいえ。情報提供型のリスク管理シグナルです。実行判断の責任は利用者にあります。</p>
          </details>
          <details>
            <summary>いつでも解約できますか？</summary>
            <p>有料フェーズでは月次でいつでも解約可能。現在のウェイトリスト期間は課金は発生しません。</p>
          </details>
          <details>
            <summary>有料提供はいつ開始ですか？</summary>
            <p>60日ライブ検証完了後に開始します。ウェイトリスト登録者へ先行案内します。</p>
          </details>
        </div>
      </div>
    </section>

    <section>
      <div class="wrap waitlist-card" id="waitlist">
        <h2>βコホートのウェイトリストに参加</h2>
        <p class="sub">検証は進行中です。完了後、登録者へ先行案内します。</p>
        <p class="fine" style="margin-top:6px">このフェーズでは課金は発生しません。提供開始時にご案内します。</p>
        <p class="fine" style="margin-top:-4px">「Wait / Defensive / Bullish / Strong Bullish」は状態ラベルです。「Safety Hold」はデータ不安定時に防御姿勢を維持する理由説明です。</p>
        <form class="waitlist-form" action="#" method="post" onsubmit="return false;">
          <label>メールアドレス（必須）
            <input id="waitlistEmail" type="email" required placeholder="you@example.com" />
          </label>
          <label>ニックネーム（任意・メール内の呼び名）
            <input id="waitlistName" type="text" placeholder="ニックネーム（例: Taro）" />
          </label>
          <div class="full cta-row" style="margin-top:2px">
            <button id="waitlistSubmitBtn" class="btn primary" type="button" aria-label="Join waitlist">優先案内を受け取る</button>
            <span class="btn secondary" aria-disabled="true">有料アクセスは検証フェーズ完了後に開始</span>
          </div>
          <p id="waitlistStatus" class="fine" aria-live="polite"></p>
        </form>
        <p class="fine">現在のCTAはウェイトリスト受付です。このフェーズでは有料決済リンクは意図的に無効化しています。</p>
      </div>
    </section>
  </main>

  <footer>
    BTC現物保有者向け資産防衛シグナルサービス。実績値は参考情報であり将来成果を保証しません。
  </footer>
  <script>
    (function () {
      const form = document.querySelector('.waitlist-form');
      const emailEl = document.getElementById('waitlistEmail');
      const nameEl = document.getElementById('waitlistName');
      const submitBtn = document.getElementById('waitlistSubmitBtn');
      const statusEl = document.getElementById('waitlistStatus');
      const WAITLIST_ENDPOINT = (
        window.WAITLIST_ENDPOINT ||
        'https://script.google.com/macros/s/AKfycbxzFt641ISSZJWtPXMSEVgQiDsITZ4J3jMrXoPw7Up_8QKtP1orayXnBsSMJETAnVC7/exec'
      ).trim();
      if (!form || !emailEl || !submitBtn || !statusEl) return;

      function isValidEmail(v) {
        return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(String(v || '').trim());
      }

      function setStatus(msg, type) {
        statusEl.textContent = msg || '';
        statusEl.style.color =
          type === 'success' ? '#2bb673' :
          type === 'error' ? '#d95b5b' :
          '';
      }

      async function submitJson(endpoint, payload) {
        const res = await fetch(endpoint, {
          method: 'POST',
          // text/plain keeps this as a simple request (no preflight),
          // while Apps Script can still parse postData.contents as JSON.
          headers: { 'Content-Type': 'text/plain;charset=utf-8' },
          body: JSON.stringify(payload)
        });
        const bodyText = await res.text();
        let bodyJson = null;
        try { bodyJson = JSON.parse(bodyText); } catch (_) {}
        const appOk = !!(
          (bodyJson && (bodyJson.ok === true || bodyJson.status === 'ok' || bodyJson.success === true)) ||
          /\"ok\"\\s*:\\s*true/i.test(bodyText) ||
          /\bok\b/i.test(bodyText)
        );
        const accepted = res.ok && (appOk || !bodyJson);
        return { accepted, status: res.status, body: bodyJson || bodyText };
      }

      async function submitFormUrlEncoded(endpoint, payload) {
        const params = new URLSearchParams();
        Object.keys(payload).forEach(function (k) {
          const v = payload[k];
          if (v !== null && v !== undefined) params.append(k, String(v));
        });
        const res = await fetch(endpoint, {
          method: 'POST',
          headers: { 'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8' },
          body: params.toString()
        });
        const bodyText = await res.text();
        let bodyJson = null;
        try { bodyJson = JSON.parse(bodyText); } catch (_) {}
        const appOk = !!(
          (bodyJson && (bodyJson.ok === true || bodyJson.status === 'ok' || bodyJson.success === true)) ||
          /\"ok\"\\s*:\\s*true/i.test(bodyText) ||
          /\bok\b/i.test(bodyText)
        );
        const accepted = res.ok && (appOk || !bodyJson);
        return { accepted, status: res.status, body: bodyJson || bodyText };
      }

      function formatUtc(ts) {
        if (!ts) return 'UNAVAILABLE';
        const d = new Date(ts);
        if (!Number.isFinite(d.getTime())) return String(ts);
        const y = d.getUTCFullYear();
        const m = String(d.getUTCMonth() + 1).padStart(2, '0');
        const day = String(d.getUTCDate()).padStart(2, '0');
        const hh = String(d.getUTCHours()).padStart(2, '0');
        const mm = String(d.getUTCMinutes()).padStart(2, '0');
        return `${y}-${m}-${day} ${hh}:${mm}`;
      }

      async function hydrateProofStatus() {
        const dayEl = document.getElementById('proofDay');
        const integrityEl = document.getElementById('proofIntegrity');
        const recordsEl = document.getElementById('proofRecords');
        const timeEl = document.getElementById('proofTimeUtc');
        const commitLinkTextEl = document.getElementById('proofCommitShaLink');
        const commitPlainEl = document.getElementById('proofCommitShaPlain');
        const commitLinkEl = document.getElementById('proofCommitLink');
        if (!dayEl || !integrityEl || !recordsEl || !timeEl || !commitLinkEl || !commitLinkTextEl || !commitPlainEl) return;

        try {
          const res = await fetch(`log.json?ts=${Date.now()}`, { cache: 'no-store' });
          if (!res.ok) throw new Error(`log_fetch_${res.status}`);
          const log = await res.json();
          const entries = Array.isArray(log?.entries) ? log.entries : [];
          const latest = (log && typeof log === 'object' ? log.latest : null) || entries[entries.length - 1] || {};

          const dayCount = entries.length;
          const integrity = latest?.chain_integrity || 'UNAVAILABLE';
          const proofTime = latest?.updated_at_utc || latest?.timestamp_utc || log?.last_updated_utc || latest?.date || '';

          dayEl.textContent = `Day ${dayCount || 0}`;
          integrityEl.textContent = String(integrity);
          recordsEl.textContent = String(dayCount || 0);
          timeEl.textContent = formatUtc(proofTime);

          const fullSha = String(log?.commit_sha || latest?.commit_sha || '').trim();
          const commitSha = fullSha ? fullSha.slice(0, 7) : 'UNAVAILABLE';
          const commitUrl = String(log?.commit_url || latest?.commit_url || '').trim() ||
            (fullSha ? `https://github.com/Naito-Dev/genki-btc-archive-public/commit/${fullSha}` : '');
          if (commitUrl && commitSha !== 'UNAVAILABLE') {
            commitLinkTextEl.textContent = commitSha;
            commitLinkEl.href = commitUrl;
            commitLinkEl.hidden = false;
            commitPlainEl.hidden = true;
          } else {
            commitPlainEl.textContent = 'UNAVAILABLE';
            commitPlainEl.hidden = false;
            commitLinkEl.hidden = true;
            commitLinkEl.removeAttribute('href');
          }

          console.debug('[PROOF_STATUS]', {
            day: dayCount || 0,
            chain_integrity: integrity,
            last_proof_time_utc: proofTime,
            commit_sha: commitSha
          });
        } catch (err) {
          dayEl.textContent = 'UNAVAILABLE';
          integrityEl.textContent = 'UNAVAILABLE';
          recordsEl.textContent = 'UNAVAILABLE';
          timeEl.textContent = 'UNAVAILABLE';
          commitPlainEl.textContent = 'UNAVAILABLE';
          commitPlainEl.hidden = false;
          commitLinkEl.hidden = true;
          commitLinkEl.removeAttribute('href');
          console.debug('[PROOF_STATUS]', { error: String(err) });
        }
      }

      hydrateProofStatus();

      submitBtn.addEventListener('click', async function () {
        const defaultLabel = 'βコホートのウェイトリストに参加';
        const submittingLabel = '送信中...';
        const email = String(emailEl.value || '').trim();
        const name = String((nameEl && nameEl.value) || '').trim();
        if (!isValidEmail(email)) {
          setStatus('有効なメールアドレスを入力してください。', 'error');
          return;
        }

        submitBtn.disabled = true;
        setStatus('送信中...');
        submitBtn.textContent = submittingLabel;

        const payload = {
          timestamp_utc: new Date().toISOString(),
          email: email,
          name: name || '',
          use_case: 'Waitlist',
          page_lang: 'ja',
          source: 'sales-page-ja'
        };

        try {
          if (!WAITLIST_ENDPOINT) {
            throw new Error('endpoint_missing');
          }

          let result;
          let mode = 'json';
          try {
            result = await submitJson(WAITLIST_ENDPOINT, payload);
            if (!result.accepted) throw new Error('submit_not_accepted_json');
          } catch (primaryErr) {
            mode = 'form-urlencoded';
            result = await submitFormUrlEncoded(WAITLIST_ENDPOINT, payload);
            if (!result.accepted) throw new Error('submit_not_accepted_form');
          }

          console.debug('[WAITLIST_SUBMIT]', {
            endpoint: WAITLIST_ENDPOINT,
            mode,
            status: result.status,
            ok: result.accepted,
            payload,
            body: result.body
          });

          setStatus('登録ありがとうございます。先行案内の対象として受け付けました。', 'success');
        } catch (err) {
          console.error('[WAITLIST_SUBMIT]', { ok: false, error: String(err), payload });
          try {
            const key = 'genki_waitlist_leads_failed';
            const failed = JSON.parse(localStorage.getItem(key) || '[]');
            failed.push(payload);
            localStorage.setItem(key, JSON.stringify(failed));
          } catch (__){}
          setStatus('送信に失敗しました。再度お試しください。', 'error');
        } finally {
          submitBtn.disabled = false;
          submitBtn.textContent = defaultLabel;
        }
      });
    })();
  </script>
</body>
</html>
